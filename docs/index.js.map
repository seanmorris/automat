{"version":3,"sources":["source/index.js"],"names":["cellSize","width","height","canvas","Tag","node","active","context","getContext","activeContext","imageData","ImageData","activeDataA","activeDataB","types","_WATER","_HEAVY","_SAND","_OIL","_SLIME","_LAVA","_STEAM","_SNOW","_BLANK","_FIRE","_SMOKE","_SOLID","totals","Bindable","make","particles","totalView","View","from","selectedType","palletView","toColor","c","map","b","toString","padStart","join","click","event","type","args","Object","assign","attributes","isLiquid","check","pixels","w","x","y","i","slice","pixMatch","p","o","pixSet","activeMask","img","Math","trunc","setActive","xc","yc","xcMax","xcl","xcr","ycu","ycd","ic","icl","icr","icu","icd","iclu","icld","icru","icrd","move","bytes","out","moved","xa","ya","ia","Error","binToName","r","g","a","String","toUpperCase","chance","odds","random","update","f","data","activeMaskPrev","_totals","Uint8ClampedArray","length","j","reversed","start","end","inc","levelL","levelR","levelLN","levelRN","levelLL","levelRR","levelLLN","levelRRN","above","below","belowL","belowR","aboveL","aboveR","aboveN","belowN","belowLN","belowRN","aboveLN","aboveRN","sign","coinFlip","set","steam","water","freshWater","sand","lava","oil","slime","fire","smoke","buttonDown","addParticle","rect","target","getBoundingClientRect","xs","clientX","left","ys","clientY","top","ws","hs","floor","parseInt","addEventListener","document","body","appendChild","render","frame","last","renderLoop","time","requestAnimationFrame","console","putImageData","timeEnd"],"mappings":"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","file":"docs/index.js","sourcesContent":["import { Tag } from 'curvature/base/Tag';\nimport { View } from 'curvature/base/View';\nimport { Bindable } from 'curvature/base/Bindable';\n\nconst cellSize = 8;\n\nconst width  = 512 * 0.5;\nconst height = 288 * 0.5;\nconst canvas = new Tag(`<canvas width = \"${width}\" height = \"${height}\">`).node;\nconst active = new Tag(`<canvas width = \"${width/cellSize}\" height = \"${height/cellSize}\">`).node;\n\nconst context    = canvas.getContext('2d');\nconst activeContext = active.getContext('2d');\nconst imageData  = new ImageData(width, height);\nconst activeDataA = new ImageData(width/cellSize, height/cellSize);\nconst activeDataB = new ImageData(width/cellSize, height/cellSize);\n\nconst types = {\n\t_WATER:   [0x00, 0x55, 0xCC, 0xFF]\n\t, _HEAVY: [0x00, 0x22, 0x99, 0xFF]\n\t, _SAND:  [0xEE, 0xAA, 0x00, 0xFF]\n\t, _OIL:   [0xAA, 0x33, 0x66, 0xFF]\n\t, _SLIME: [0x00, 0xFF, 0x33, 0xFF]\n\t, _LAVA:  [0xFF, 0x00, 0x00, 0xFF]\n\t, _STEAM: [0xAA, 0xAA, 0xCC, 0xFF]\n\t, _SNOW:  [0xFF, 0xFF, 0xFF, 0xFF]\n\t, _BLANK: [0xAA, 0xAA, 0xAA, 0xFF]\n\t, _FIRE:  [0xFF, 0xFF, 0x00, 0xFF]\n\t, _SMOKE: [0x11, 0x33, 0x11, 0xFF]\n\t, _SOLID: [0x00, 0x00, 0x00, 0xFF]\n\t, _BLANK: [0x00, 0x00, 0x00, 0x00]\n};\n\nconst totals     = Bindable.make({ particles: 0 });\nconst totalView  = View.from('<div cv-each = \"totals:total:name\"><div>[[name]]: [[total]]</div></div>', {totals});\n\nlet selectedType = types._SAND;\n\nconst palletView = View.from('<div class = \"pallet\" cv-each = \"types:type:name\"><div><div cv-on = \"click(event, type)\" class = \"typeSelect\" data-name = \"[[name]]\" style = \"--type:#[[type|toColor]];\"></div></div></div>', {totals});\n\npalletView.toColor = c => c.map(b => b.toString(16).padStart(2, '0')).join('');\npalletView.click = (event, type) => selectedType = type;\n\npalletView.args.types = {};\n\nObject.assign(palletView.args.types, types);\n\nconst attributes = {\n\t_WATER:   {isLiquid: true}\n\t, _HEAVY: {isLiquid: true}\n};\n\nconst check = (pixels, w, x, y) => {\n\n\tif(y < 0 || y > (height - 1) || x < 0 || x > w-1)\n\t{\n\t\treturn types._SOLID;\n\t}\n\n\tconst i  = 4 * x  + 4 * y * w;\n\n\treturn pixels.slice(i, i + 4);\n}\n\nconst pixMatch = (p, c, o = 0) => {\n\tif(p[0 + o] !== c[0]) return false;\n\tif(p[1 + o] !== c[1]) return false;\n\tif(p[2 + o] !== c[2]) return false;\n\tif(p[3 + o] !== c[3]) return false;\n\treturn true;\n}\n\nconst pixSet = (activeMask, img, o, p) => {\n\timg[o + 0] = p[0];\n\timg[o + 1] = p[1];\n\timg[o + 2] = p[2];\n\timg[o + 3] = p[3];\n\n\tconst x = (o / 4) % width;\n\tconst y = Math.trunc(o / 4 / width);\n\n\tsetActive(activeMask,width,x,y);\n}\n\nconst setActive = (activeMask,w,x,y) => {\n\tconst xc =  Math.trunc(x / cellSize);\n\tconst yc =  Math.trunc(y / cellSize);\n\n\tconst xcMax = Math.trunc(w / cellSize);\n\t\n\tconst xcl = xc - 1;\n\tconst xcr = xc + 1;\n\t\n\tconst ycu = yc - 1;\n\tconst ycd = yc + 1;\n\n\tconst ic  =  4 * xc  + 4 * yc  * xcMax;\n\tconst icl  = 4 * xcl + 4 * yc  * xcMax;\n\tconst icr  = 4 * xcr + 4 * yc  * xcMax;\n\tconst icu  = 4 * xc  + 4 * ycu * xcMax;\n\tconst icd  = 4 * xc  + 4 * ycd * xcMax;\n\n\tconst iclu = 4 * xcl + 4 * ycu * xcMax;\n\tconst icld = 4 * xcl + 4 * ycd * xcMax;\n\tconst icru = 4 * xcr + 4 * ycu * xcMax;\n\tconst icrd = 4 * xcr + 4 * ycd * xcMax;\n\n\tactiveMask[ic + 0] = 0xFF;\n\tactiveMask[ic + 1] = 0xFF;\n\tactiveMask[ic + 2] = 0xFF;\n\tactiveMask[ic + 3] = 0xFF;\n\n\tactiveMask[icu + 0] = activeMask[icu + 0] || 0x80;\n\tactiveMask[icu + 1] = activeMask[icu + 1] || 0x80;\n\tactiveMask[icu + 2] = activeMask[icu + 2] || 0x80;\n\tactiveMask[icu + 3] = activeMask[icu + 3] || 0x80;\n\tactiveMask[icd + 0] = activeMask[icd + 0] || 0x80;\n\tactiveMask[icd + 1] = activeMask[icd + 1] || 0x80;\n\tactiveMask[icd + 2] = activeMask[icd + 2] || 0x80;\n\tactiveMask[icd + 3] = activeMask[icd + 3] || 0x80;\n\n\tif(xc > 0)\n\t{\n\t\tactiveMask[icl + 0]  = activeMask[icl + 0]  || 0x80;\n\t\tactiveMask[icl + 1]  = activeMask[icl + 1]  || 0x80;\n\t\tactiveMask[icl + 2]  = activeMask[icl + 2]  || 0x80;\n\t\tactiveMask[icl + 3]  = activeMask[icl + 3]  || 0x80;\n\t\tactiveMask[iclu + 0] = activeMask[iclu + 0] || 0x40;\n\t\tactiveMask[iclu + 1] = activeMask[iclu + 1] || 0x40;\n\t\tactiveMask[iclu + 2] = activeMask[iclu + 2] || 0x40;\n\t\tactiveMask[iclu + 3] = activeMask[iclu + 3] || 0x40;\n\t\tactiveMask[icld + 0] = activeMask[icld + 0] || 0x40;\n\t\tactiveMask[icld + 1] = activeMask[icld + 1] || 0x40;\n\t\tactiveMask[icld + 2] = activeMask[icld + 2] || 0x40;\n\t\tactiveMask[icld + 3] = activeMask[icld + 3] || 0x40;\n\t}\n\n\tif(xc < -1+xcMax)\n\t{\n\t\tactiveMask[icr + 0]  =  activeMask[icr + 0] ||  0x80;\n\t\tactiveMask[icr + 1]  =  activeMask[icr + 1] ||  0x80;\n\t\tactiveMask[icr + 2]  =  activeMask[icr + 2] ||  0x80;\n\t\tactiveMask[icr + 3]  =  activeMask[icr + 3] ||  0x80;\n\t\tactiveMask[icru + 0] =  activeMask[icru + 0] || 0x40;\n\t\tactiveMask[icru + 1] =  activeMask[icru + 1] || 0x40;\n\t\tactiveMask[icru + 2] =  activeMask[icru + 2] || 0x40;\n\t\tactiveMask[icru + 3] =  activeMask[icru + 3] || 0x40;\n\t\tactiveMask[icrd + 0] =  activeMask[icrd + 0] || 0x40;\n\t\tactiveMask[icrd + 1] =  activeMask[icrd + 1] || 0x40;\n\t\tactiveMask[icrd + 2] =  activeMask[icrd + 2] || 0x40;\n\t\tactiveMask[icrd + 3] =  activeMask[icrd + 3] || 0x40;\n\t}\n}\nconst move = (bytes, out, moved, activeMask,  w, x, y, xa, ya) => {\n\tconst i  = 4 * x  + 4 * y  * w;\n\tconst ia = 4 * xa + 4 * ya * w;\n\n\tif(xa > w) throw new Error(`x dest out of bounds. (${x})`);\n\tif(ya > w) throw new Error(`y dest out of bounds. (${x})`);\n\n\tif(moved[i]) return;\n\tif(moved[ia]) return;\n\n\tsetActive(activeMask,w,x,y);\n\tsetActive(activeMask,w,xa,ya);\n\n\tmoved[i] = true;\n\tmoved[ia] = true;\n\n\tout[ia + 0] = bytes[i + 0];\n\tout[ia + 1] = bytes[i + 1];\n\tout[ia + 2] = bytes[i + 2];\n\tout[ia + 3] = bytes[i + 3];\n\t\n\tout[i + 0]  = bytes[ia + 0];\n\tout[i + 1]  = bytes[ia + 1];\n\tout[i + 2]  = bytes[ia + 2];\n\tout[i + 3]  = bytes[ia + 3];\n\n\t// bytes[ia + 0] = bytes[i + 0] = 0;\n\t// bytes[ia + 1] = bytes[i + 1] = 0;\n\t// bytes[ia + 2] = bytes[i + 2] = 0;\n\t// bytes[ia + 3] = bytes[i + 3] = 0;\n};\nconst binToName = (r,g,b,a) => {\n\treturn !a ? false : String(r.toString(16).padStart(2, '0')\n\t\t+ g.toString(16).padStart(2, '0')\n\t\t+ b.toString(16).padStart(2, '0')\n\t\t+ a.toString(16).padStart(2, '0')).toUpperCase();\n};\nconst chance = (odds) => Math.random() < odds;\nconst update = (bytes, w, f) => {\n\n\tconst activeMask = f % 2 ? activeDataA.data : activeDataB.data;\n\tconst activeMaskPrev = f % 2 ? activeDataB.data : activeDataA.data;\n\tconst _totals = {};\n\tconst out   = new Uint8ClampedArray(bytes);\n\tconst moved = new Uint8ClampedArray(bytes.length);\n\n\t// if(f % 10 === 0)\n\t// {\n\t// \tfor(let j = 0; j < 128; j += 8)\n\t// \t{\n\t// \t\tpixSet(activeMask, out, 4 * (j + 64), types._SNOW);\n\t// \t\t// moved[j] = true;\n\t// \t}\n\t// }\n\n\tfor(let j = activeMask.length; j -=4;)\n\t{\n\t\tactiveMask[j-1] = activeMask[j-1] <= 16 ? 0 : activeMask[j-1] - 16;\n\t}\n\n\tconst reversed = chance(0.5);\n\n\tconst start = reversed ? bytes.length : 0;\n\tconst end   = reversed ? 0 : bytes.length;\n\tconst inc   = reversed ? -4 : 4;\n\n\tfor(let i = start; (inc > 0) ? i < end : i > end; i += inc)\n\t{\n\t\tconst a = bytes[i + 3];\n\n\t\t_totals.particles = 1 + (_totals.particles ?? 0);\n\n\t\tconst r = bytes[i + 0];\n\t\tconst g = bytes[i + 1];\n\t\tconst b = bytes[i + 2];\n\n\t\tconst x = (i / 4) % w;\n\t\tconst y = Math.trunc(i / 4 / w);\n\n\t\tconst xc =  Math.trunc(x / cellSize);\n\t\tconst yc =  Math.trunc(y / cellSize);\n\n\t\tconst ic  =  4 * xc  + 4 * yc  * Math.trunc(w / cellSize);\n\n\t\tif(f > 1 && !activeMaskPrev[ic + 3])\n\t\t{\n\t\t\ti += cellSize * inc;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif(!a) continue;\n\n\t\tconst levelL   = check(bytes, w, x - 1, y);\n\t\tconst levelR   = check(bytes, w, x + 1, y);\n\t\tconst levelLN  = check(out,   w, x - 1, y);\n\t\tconst levelRN  = check(out,   w, x + 1, y);\n\t\tconst levelLL  = check(bytes, w, x - 2, y);\n\t\tconst levelRR  = check(bytes, w, x + 2, y);\n\t\tconst levelLLN = check(out,   w, x - 2, y);\n\t\tconst levelRRN = check(out,   w, x + 2, y);\n\n\t\tconst above  = check(bytes, w, x + 0, y - 1);\n\t\tconst below  = check(bytes, w, x + 0, y + 1);\n\t\tconst belowL = check(bytes, w, x - 1, y + 1);\n\t\tconst belowR = check(bytes, w, x + 1, y + 1);\n\t\tconst aboveL = check(bytes, w, x - 1, y - 1);\n\t\tconst aboveR = check(bytes, w, x + 1, y - 1);\n\t\t\n\t\tconst aboveN  = check(out, w, x + 0, y - 1);\n\t\tconst belowN  = check(out, w, x + 0, y + 1);\n\t\tconst belowLN = check(out, w, x - 1, y + 1);\n\t\tconst belowRN = check(out, w, x + 1, y + 1);\n\t\tconst aboveLN = check(out, w, x - 1, y - 1);\n\t\tconst aboveRN = check(out, w, x + 1, y - 1);\n\n\t\t// Fire\n\t\tif(pixMatch(bytes, types._FIRE, i))\n\t\t{\n\t\t\tif(!below[3] && !belowN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\n\t\t\telse if((pixMatch(above, types._WATER) && pixMatch(aboveN, types._WATER)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, out, i, types._SMOKE);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\n\t\t\telse if(chance(0.95) && (pixMatch(above, types._OIL) && pixMatch(aboveN, types._OIL)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i + 4 * -w, types._FIRE);\n\t\t\t\tpixSet(activeMask, out, i + 4 * -w, types._FIRE);\n\t\t\t\tmoved[i + 4 * -w] = true;\n\t\t\t}\n\t\t\telse if(chance(0.25) && (pixMatch(below, types._OIL) && pixMatch(belowN, types._OIL)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i + 4 * w, types._FIRE);\n\t\t\t\tpixSet(activeMask, out, i + 4 * w, types._FIRE);\n\t\t\t\tmoved[i + 4 * w] = true;\n\t\t\t}\n\t\t\telse if(chance(0.5) && (pixMatch(levelL, types._OIL) && pixMatch(levelLN, types._OIL)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i - 4, types._FIRE);\n\t\t\t\tpixSet(activeMask, out, i - 4, types._FIRE);\n\t\t\t\tmoved[i - 4] = true;\n\t\t\t}\n\t\t\telse if(chance(0.5) && (pixMatch(levelR, types._OIL) && pixMatch(levelRN, types._OIL)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i + 4, types._FIRE);\n\t\t\t\tpixSet(activeMask, out, i + 4, types._FIRE);\n\t\t\t\tmoved[i + 4] = true;\n\t\t\t}\n\t\t\t\n\t\t\telse if(chance(0.02) && (pixMatch(below, types._FIRE) && pixMatch(belowN, types._FIRE)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, out, i, types._SMOKE);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t\telse if(chance(0.01) && !(pixMatch(above, types._FIRE) && pixMatch(aboveN, types._FIRE)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, out, i, types._SMOKE);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Smoke\n\t\tif(pixMatch(bytes, types._SMOKE, i))\n\t\t{\n\t\t\tif(pixMatch(above, types._LAVA) && pixMatch(aboveN, types._LAVA))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._SAND) && pixMatch(aboveN, types._SAND))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._WATER) && pixMatch(aboveN, types._WATER))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._OIL) && pixMatch(aboveN, types._OIL))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._SLIME) && pixMatch(aboveN, types._SLIME))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.05)\n\t\t\t\t&& !below[3]\n\t\t\t\t&& !belowN[3]\n\t\t\t\t&& pixMatch(levelL, types._STEAM) && pixMatch(levelLN, types._STEAM)\n\t\t\t\t&& pixMatch(levelR, types._STEAM) && pixMatch(levelRN, types._STEAM)\n\t\t\t){\n\t\t\t\tpixSet(activeMask, out, i, types._SLIME);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t\t// else if(chance(0.75)\n\t\t\t// \t&& pixMatch(levelL, types._STEAM)\n\t\t\t// \t&& pixMatch(levelR, types._STEAM)\n\t\t\t// \t&& pixMatch(levelLN, types._STEAM)\n\t\t\t// \t&& pixMatch(levelRN, types._STEAM)\n\t\t\t// \t&& pixMatch(levelLL, types._STEAM)\n\t\t\t// \t&& pixMatch(levelRR, types._STEAM)\n\t\t\t// \t&& pixMatch(levelLLN, types._STEAM)\n\t\t\t// \t&& pixMatch(levelRRN, types._STEAM)\n\t\t\t// ){\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5)?-1:1)*(chance(0.75)?2:1), y);\n\t\t\t// }\n\t\t\t// else if(chance(0.3) && pixMatch(levelL, types._STEAM) && pixMatch(levelLN, types._STEAM) && pixMatch(levelLL, types._STEAM) && pixMatch(levelLLN, types._STEAM))\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.75)?2:1), y);\n\t\t\t// }\n\t\t\t// else if(chance(0.3) && pixMatch(levelR, types._STEAM) && pixMatch(levelRN, types._STEAM) && pixMatch(levelRR, types._STEAM) && pixMatch(levelRRN, types._STEAM))\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.75)?2:1), y);\n\t\t\t// }\n\t\t\telse if(pixMatch(levelL, types._STEAM)\n\t\t\t\t&& pixMatch(levelR, types._STEAM)\n\t\t\t\t&& pixMatch(levelLN, types._STEAM)\n\t\t\t\t&& pixMatch(levelRN, types._STEAM)\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(chance(0.3) && pixMatch(levelL, types._STEAM) && pixMatch(levelLN, types._STEAM))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if(chance(0.3) && pixMatch(levelR, types._STEAM) && pixMatch(levelRN, types._STEAM))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\t\t\telse if(!aboveL[3] && !aboveLN[3] && !aboveR[3] && !aboveRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5) ? -1:1), y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.5) && !aboveL[3] && !aboveLN[3] && chance(0.5))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.5) && !aboveR[3] && !aboveRN[3] && chance(0.5))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y - 1);\n\t\t\t}\n\t\t\telse if(!levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(chance(0.5) && !levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(chance(0.5) && !levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t}\n\n\t\t// Snow\n\t\tif(pixMatch(bytes, types._SNOW, i))\n\t\t{\n\t\t\t// if(pixMatch(above, types._LAVA) && pixMatch(aboveN, types._LAVA))\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t// }\n\t\t\t// else if(pixMatch(above, types._SAND) && pixMatch(aboveN, types._SAND))\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t// }\n\t\t\t// else if(pixMatch(above, types._OIL) && pixMatch(aboveN, types._OIL))\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t// }\n\t\t\tif(chance(0.1) && pixMatch(above, types._WATER) && pixMatch(aboveN, types._WATER))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, out, i, types._WATER);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t\telse if(chance(0.1) && pixMatch(levelL, types._WATER) && pixMatch(levelLN, types._WATER))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, out, i, types._WATER);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t\telse if(chance(0.1) && pixMatch(levelL, types._WATER) && pixMatch(levelRN, types._WATER))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, out, i, types._WATER);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t\telse if(chance(0.1) && pixMatch(above, types._WATER) && pixMatch(aboveN, types._WATER))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, out, i, types._WATER);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t\t// else if(pixMatch(above, types._SLIME) && pixMatch(aboveN, types._SLIME))\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t// }\n\t\t\telse if(chance(0.7) && !below[3] && !belowN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\t\t\telse if(chance(0.7) && !belowL[3] && !belowLN[3] && !belowR[3] && !belowRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5) ? -1:1), y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.7) && !belowL[3] && !belowLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.7) && !belowR[3] && !belowRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y - 1);\n\t\t\t}\n\t\t\t// else if(!levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.5)?-1:1), y);\n\t\t\t// }\n\t\t\t// else if(chance(0.5) && !levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3])\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.04)?1:2), y);\n\t\t\t// }\n\t\t\t// else if(chance(0.5) && !levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t// {\n\t\t\t// \tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.04)?1:2), y);\n\t\t\t// }\n\t\t\t// else if(chance(0.01) \n\t\t\t// \t&& !below[3]\n\t\t\t// \t&& !belowN[3]\n\t\t\t// \t&& pixMatch(above, types._STEAM) && pixMatch(aboveN, types._STEAM)\n\t\t\t// \t&& pixMatch(levelL, types._STEAM) && pixMatch(levelLN, types._STEAM)\n\t\t\t// \t&& pixMatch(levelR, types._STEAM) && pixMatch(levelRN, types._STEAM)\n\t\t\t// ){\n\t\t\t// \tpixSet(activeMask, out, i, types._WATER);\n\t\t\t// \tmoved[i] = true;\n\t\t\t// }\n\t\t\t// else if(chance(0.005) \n\t\t\t// \t&& !below[3]\n\t\t\t// \t&& !belowN[3]\n\t\t\t// \t&& pixMatch(levelL, types._STEAM) && pixMatch(levelLN, types._STEAM)\n\t\t\t// \t&& pixMatch(levelR, types._STEAM) && pixMatch(levelRN, types._STEAM)\n\t\t\t// ){\n\t\t\t// \tpixSet(activeMask, out, i, types._WATER);\n\t\t\t// \tmoved[i] = true;\n\t\t\t// }\n\t\t}\n\n\t\t// Steam\n\t\tif(pixMatch(bytes, types._STEAM, i))\n\t\t{\n\t\t\tif(pixMatch(above, types._LAVA) && pixMatch(aboveN, types._LAVA))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._SAND) && pixMatch(aboveN, types._SAND))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._OIL) && pixMatch(aboveN, types._OIL))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._WATER) && pixMatch(aboveN, types._WATER))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(pixMatch(above, types._SLIME) && pixMatch(aboveN, types._SLIME))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.7) && !above[3] && !aboveN[3] && chance(0.5))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.7) && !aboveL[3] && !aboveLN[3] && !aboveR[3] && !aboveRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5) ? -1:1), y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.7) && !aboveL[3] && !aboveLN[3] && chance(0.5))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.7) && !aboveR[3] && !aboveRN[3] && chance(0.5))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y - 1);\n\t\t\t}\n\t\t\telse if(!levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(chance(0.5) && !levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(chance(0.5) && !levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(chance(0.01) \n\t\t\t\t&& !below[3]\n\t\t\t\t&& !belowN[3]\n\t\t\t\t&& pixMatch(above, types._STEAM) && pixMatch(aboveN, types._STEAM)\n\t\t\t\t&& pixMatch(levelL, types._STEAM) && pixMatch(levelLN, types._STEAM)\n\t\t\t\t&& pixMatch(levelR, types._STEAM) && pixMatch(levelRN, types._STEAM)\n\t\t\t){\n\t\t\t\tpixSet(activeMask, out, i, types._WATER);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t\telse if(chance(0.005) \n\t\t\t\t&& !below[3]\n\t\t\t\t&& !belowN[3]\n\t\t\t\t&& pixMatch(levelL, types._STEAM) && pixMatch(levelLN, types._STEAM)\n\t\t\t\t&& pixMatch(levelR, types._STEAM) && pixMatch(levelRN, types._STEAM)\n\t\t\t){\n\t\t\t\tpixSet(activeMask, out, i, types._WATER);\n\t\t\t\tmoved[i] = true;\n\t\t\t}\n\t\t}\n\n\t\t// Oil\n\t\tif(pixMatch(bytes, types._OIL, i))\n\t\t{\n\t\t\tif(!below[3] && !belowN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\n\t\t\telse if(!levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(!levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(!levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\t\n\t\t\telse if(!belowL[3] && !belowR[3] && !belowLN[3] && !belowRN[3] && !levelL[3] && !levelLN[3] && !levelR[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + Math.sign(-0.5 + Math.random()), y + 1);\n\t\t\t}\n\t\t\t\n\t\t\telse if(!belowL[3] && !belowLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y + 1);\n\t\t\t}\n\t\t\telse if(!belowR[3] && !belowRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y + 1);\n\t\t\t}\n\t\t\t\n\t\t\telse if(!levelL[3] && !levelLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if(!levelR[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// SLIME\n\t\tif(pixMatch(bytes, types._SLIME, i))\n\t\t{\n\t\t\tif(!below[3] && !belowN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\t\t\telse if(chance(0.9) && pixMatch(below, types._SAND) && pixMatch(belowN, types._SAND))\n\t\t\t{\n\t\t\t}\n\t\t\telse if(!belowL[3] && !belowLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y + 1);\n\t\t\t}\n\t\t\telse if(!belowR[3] && !belowRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y + 1);\n\t\t\t}\n\t\t\telse if(!belowL[3] && !belowR[3] && !belowLN[3] && !belowRN[3] && !levelL[3] && !levelLN[3] && !levelR[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + Math.sign(-0.5 + Math.random()), y);\n\t\t\t}\n\t\t\telse if((pixMatch(levelL, types._OIL) || pixMatch(levelL,  types._WATER)|| pixMatch(levelL,  types._HEAVY))\n\t\t\t\t&& (pixMatch(levelR, types._OIL)  || pixMatch(levelR,  types._WATER)|| pixMatch(levelR,  types._HEAVY))\n\t\t\t\t&& (pixMatch(levelLN, types._OIL) || pixMatch(levelLN, types._WATER)|| pixMatch(levelLN, types._HEAVY))\n\t\t\t\t&& (pixMatch(levelRN, types._OIL) || pixMatch(levelRN, types._WATER)|| pixMatch(levelRN, types._HEAVY))\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if((pixMatch(levelL, types._OIL) || pixMatch(levelL, types._WATER) || pixMatch(levelL, types._HEAVY))\n\t\t\t\t&& (pixMatch(levelLN, types._OIL) || pixMatch(levelLN, types._WATER) || pixMatch(levelLN, types._HEAVY))\n\t\t\t\t&& (pixMatch(levelLLN, types._OIL) || pixMatch(levelLLN, types._WATER) || pixMatch(levelLLN, types._HEAVY))\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if((pixMatch(levelR, types._OIL) || pixMatch(levelR, types._WATER) || pixMatch(levelR, types._HEAVY))\n\t\t\t\t&& (pixMatch(levelRN, types._OIL) || pixMatch(levelRN, types._WATER) || pixMatch(levelRN, types._HEAVY))\n\t\t\t\t&& (pixMatch(levelRRN, types._OIL) || pixMatch(levelRRN, types._WATER) || pixMatch(levelRRN, types._HEAVY))\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\t\t\telse if(chance(0.35) && (pixMatch(above, types._WATER) && pixMatch(aboveN, types._WATER) || pixMatch(above, types._HEAVY) && pixMatch(aboveN, types._HEAVY)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y - 1);\n\t\t\t}\n\t\t\telse if(chance(0.75) && (pixMatch(belowL, types._OIL) && pixMatch(belowLN, types._OIL)) || (pixMatch(belowL, types._WATER) && pixMatch(belowLN, types._WATER)) || (pixMatch(belowL, types._HEAVY) && pixMatch(belowLN, types._HEAVY)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y + 1);\n\t\t\t}\n\t\t\telse if(chance(0.75) && (pixMatch(belowR, types._OIL) && pixMatch(belowRN, types._OIL)) || (pixMatch(belowR, types._WATER) && pixMatch(belowRN, types._WATER)) || (pixMatch(belowR, types._HEAVY) && pixMatch(belowRN, types._HEAVY)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y + 1);\n\t\t\t}\n\t\t\telse if(chance(0.2) && !levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(chance(0.01) && !levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(chance(0.01) && !levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(chance(0.02) && !levelL[3] && !levelLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if(chance(0.02) && !levelR[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\t\t}\n\n\t\t// Salt Water\t\t\n\t\tif(pixMatch(bytes, types._HEAVY, i))\n\t\t{\n\t\t\tif(!belowN[3] || pixMatch(belowN, types._OIL) || (chance(0.05) && pixMatch(belowN, types._WATER)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\t\t\telse if(!levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if((pixMatch(levelL, types._OIL) || pixMatch(levelL,  types._WATER))\n\t\t\t\t&& (pixMatch(levelR, types._OIL)  || pixMatch(levelR,  types._WATER))\n\t\t\t\t&& (pixMatch(levelLN, types._OIL) || pixMatch(levelLN, types._WATER))\n\t\t\t\t&& (pixMatch(levelRN, types._OIL) || pixMatch(levelRN, types._WATER))\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if((pixMatch(levelL, types._OIL) || pixMatch(levelL, types._WATER))\n\t\t\t\t&& (pixMatch(levelLN, types._OIL) || pixMatch(levelLN, types._WATER))\n\t\t\t\t&& (pixMatch(levelLLN, types._OIL) || pixMatch(levelLLN, types._WATER))\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if((pixMatch(levelR, types._OIL) || pixMatch(levelR, types._WATER))\n\t\t\t\t&& (pixMatch(levelRN, types._OIL) || pixMatch(levelRN, types._WATER))\n\t\t\t\t&& (pixMatch(levelRRN, types._OIL) || pixMatch(levelRRN, types._WATER))\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\t\t\telse if(!belowLN[3] || pixMatch(belowLN, types._OIL) || pixMatch(belowLN, types._WATER))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y + 1);\n\t\t\t}\n\t\t\telse if(!belowRN[3] || pixMatch(belowRN, types._OIL) || pixMatch(belowRN, types._WATER))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y + 1);\n\t\t\t}\n\t\t\telse if(!levelL[3] && !levelLN[3] && !levelLLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.1) ? 1:2), y);\n\t\t\t}\n\t\t\telse if(!levelR[3] && !levelRN[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.1) ? 1:2), y);\n\t\t\t}\n\t\t\telse if(!levelL[3] && !levelLN[3] && chance(0.25))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if(!levelR[3] && !levelRN[3] && chance(0.25))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\t\t\telse if((!above[3] && chance(0.4 * 2)) || chance(0.25 * 2))\n\t\t\t{\n\t\t\t\tif(pixMatch(levelL, types._SAND) && pixMatch(levelLN, types._SAND) && pixMatch(belowL, types._SAND))\n\t\t\t\t{\n\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t\t}\n\t\t\t\telse if(pixMatch(levelR, types._SAND) && pixMatch(levelRN, types._SAND) && pixMatch(belowR, types._SAND))\n\t\t\t\t{\n\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Water\t\t\n\t\tif(pixMatch(bytes, types._WATER, i))\n\t\t{\n\t\t\tconst coinFlip = chance(0.5);\n\n\t\t\tif(!below[3] && !belowN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\n\t\t\telse if(!above[3] && !aboveN[3] && pixMatch(below, types._SAND) && pixMatch(belowN, types._SAND) && !belowL[3] && !belowLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y + 1, x - 1, y + 1);\n\t\t\t}\n\t\t\telse if(!above[3] && !aboveN[3] && pixMatch(below, types._SAND) && pixMatch(belowN, types._SAND) && !belowR[3] && !belowRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y + 1, x + 1, y + 1);\n\t\t\t}\n\t\t\t\n\t\t\telse if(pixMatch(below, types._WATER) && pixMatch(belowN, types._WATER) && !levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3] && !levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.1) ? 1:2) * (chance(0.5) ? -1:1), y);\n\t\t\t}\n\t\t\telse if(coinFlip && pixMatch(below, types._WATER) && pixMatch(belowN, types._WATER) && !levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.1) ? 1:2), y);\n\t\t\t}\n\t\t\telse if(!coinFlip && pixMatch(below, types._WATER) && pixMatch(belowN, types._WATER) && !levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.1) ? 1:2), y);\n\t\t\t}\n\n\n\t\t\telse if(!levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(coinFlip && !pixMatch(above, types._SAND) && !pixMatch(aboveN, types._SAND) && !levelL[3] && !levelLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if(!coinFlip && !pixMatch(above, types._SAND) && !pixMatch(aboveN, types._SAND) && !levelR[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\n\t\t\telse if(pixMatch(below, types._OIL) && pixMatch(belowN, types._OIL))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\t\t\telse if(pixMatch(levelL, types._OIL)\n\t\t\t\t&& pixMatch(levelR, types._OIL)\n\t\t\t\t&& pixMatch(levelLN, types._OIL)\n\t\t\t\t&& pixMatch(levelRN, types._OIL)\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(pixMatch(levelL, types._OIL)\n\t\t\t\t&& pixMatch(levelLN, types._OIL)\n\t\t\t\t&& pixMatch(levelLL, types._OIL)\n\t\t\t\t&& pixMatch(levelLLN, types._OIL)\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x - 1, y, x, y);\n\t\t\t}\n\t\t\telse if(pixMatch(levelR, types._OIL)\n\t\t\t\t&& pixMatch(levelRN, types._OIL)\n\t\t\t\t&& pixMatch(levelRR, types._OIL)\n\t\t\t\t&& pixMatch(levelRRN, types._OIL)\n\t\t\t){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x + 1, y, x, y);\n\t\t\t}\n\n\t\t\telse if(coinFlip && !above[3] && !aboveN[3] && (!belowL[3] || pixMatch(belowL, types._OIL)) && (!belowLN[3] || pixMatch(belowLN, types._OIL)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y + 1);\n\t\t\t}\n\t\t\telse if(!coinFlip && !above[3] && !aboveN[3] && (!belowR[3] || pixMatch(belowR, types._OIL)) && (!belowRN[3] || pixMatch(belowRN, types._OIL)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y + 1);\n\t\t\t}\n\n\t\t\telse if(!pixMatch(above, types._SAND) && !pixMatch(aboveN, types._SAND) && ((!above[3] && chance(0.01)) || chance(0.1)))\n\t\t\t{\n\t\t\t\tif(pixMatch(levelL, types._SAND)\n\t\t\t\t\t&& pixMatch(levelR, types._SAND)\n\t\t\t\t\t&& pixMatch(levelLN, types._SAND)\n\t\t\t\t\t&& pixMatch(levelRN, types._SAND)\n\t\t\t\t){\n\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.5)?-1:1), y);\n\t\t\t\t}\n\t\t\t\telse if(coinFlip && pixMatch(levelL, types._SAND) && pixMatch(levelLN, types._SAND))\n\t\t\t\t{\n\t\t\t\t\tmove(bytes, out, moved, activeMask, w, x, y, x - 1, y);\n\t\t\t\t}\n\t\t\t\telse if(!coinFlip && pixMatch(levelR, types._SAND) && pixMatch(levelRN, types._SAND))\n\t\t\t\t{\n\t\t\t\t\tmove(bytes, out, moved, activeMask, w, x, y, x + 1, y);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t// Sand\n\t\tif(pixMatch(bytes, types._SAND, i))\n\t\t{\n\t\t\tif((!below[3] && !belowN[3]) || (\n\t\t\t\t(pixMatch(below, types._WATER) && pixMatch(belowN, types._WATER))\n\t\t\t\t|| (pixMatch(below, types._HEAVY) && pixMatch(belowN, types._HEAVY))\n\t\t\t\t|| (pixMatch(below, types._OIL) && pixMatch(belowN, types._OIL))\n\t\t\t)){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\t\t\t\n\t\t\telse if(chance(0.2))\n\t\t\t{\n\t\t\t\tif(!belowL[3] && !belowR[3] && !belowLN[3] && !belowRN[3] && !levelL[3] && !levelLN[3] && !levelR[3] && !levelRN[3])\n\t\t\t\t{\n\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + Math.sign(-0.5 + Math.random()), y);\n\t\t\t\t}\n\t\t\t\telse if((!above[3] && chance(0.3)) || chance(0.02))\n\t\t\t\t{\n\t\t\t\t\tif(!belowL[3] && !belowLN[3] && !levelL[3] && !levelLN[3])\n\t\t\t\t\t{\n\t\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t\t\t}\n\t\t\t\t\telse if(!belowR[3] && !belowRN[3] && !levelR[3] && !levelRN[3])\n\t\t\t\t\t{\n\t\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Lava\n\t\tif(pixMatch(bytes, types._LAVA, i))\n\t\t{\n\t\t\tif(chance(0.75) && (pixMatch(above, types._WATER) && pixMatch(aboveN, types._WATER)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i + 4 * -w, types._STEAM);\n\t\t\t\tpixSet(activeMask, out, i + 4 * -w, types._STEAM);\n\t\t\t\tmoved[i + 4 * -w] = true;\n\t\t\t}\n\t\t\telse if(chance(0.75) && (pixMatch(levelL, types._WATER) && pixMatch(levelLN, types._WATER)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i - 4, types._STEAM);\n\t\t\t\tpixSet(activeMask, out, i - 4, types._STEAM);\n\t\t\t\tmoved[i - 4] = true;\n\t\t\t}\n\t\t\telse if(chance(0.75) && (pixMatch(levelR, types._WATER) && pixMatch(levelRN, types._WATER)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i + 4, types._STEAM);\n\t\t\t\tpixSet(activeMask, out, i + 4, types._STEAM);\n\t\t\t\tmoved[i + 4] = true;\n\t\t\t}\n\t\t\telse if((pixMatch(below, types._SLIME) && pixMatch(belowN, types._SLIME)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\t\t\telse if((pixMatch(above, types._OIL) && pixMatch(aboveN, types._OIL)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i + 4 * -w, types._FIRE);\n\t\t\t\tpixSet(activeMask, out, i + 4 * -w, types._FIRE);\n\t\t\t\tmoved[i + 4 * -w] = true;\n\t\t\t}\n\t\t\telse if((pixMatch(levelL, types._OIL) && pixMatch(levelLN, types._OIL)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i - 4, types._FIRE);\n\t\t\t\tpixSet(activeMask, out, i - 4, types._FIRE);\n\t\t\t\tmoved[i - 4] = true;\n\t\t\t}\n\t\t\telse if((pixMatch(levelR, types._OIL) && pixMatch(levelRN, types._OIL)))\n\t\t\t{\n\t\t\t\tpixSet(activeMask, bytes, i + 4, types._FIRE);\n\t\t\t\tpixSet(activeMask, out, i + 4, types._FIRE);\n\t\t\t\tmoved[i + 4] = true;\n\t\t\t}\n\t\t\telse if((!below[3] && !belowN[3]) || (\n\t\t\t\t(pixMatch(below, types._WATER) || pixMatch(below, types._HEAVY) || pixMatch(below, types._OIL))\n\t\t\t\t && (pixMatch(belowN, types._WATER) || pixMatch(belowN, types._HEAVY) || pixMatch(belowN, types._OIL))\n\t\t\t)){\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x, y + 1);\n\t\t\t}\n\t\t\telse if(chance(0.9))\n\t\t\t{\n\t\t\t\tif(!belowL[3] && !belowR[3] && !belowLN[3] && !belowRN[3] && !levelL[3] && !levelLN[3] && !levelR[3] && !levelRN[3])\n\t\t\t\t{\n\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + Math.sign(-0.5 + Math.random()), y);\n\t\t\t\t}\n\t\t\t\telse if((!above[3] && chance(0.5)) || chance(0.05))\n\t\t\t\t{\n\t\t\t\t\tif( ((!levelL[3] && !levelLN[3]) || (pixMatch(levelL, types._SLIME) && pixMatch(levelLN, types._SLIME)) ) && ((!belowL[3] && !belowLN[3]) || (pixMatch(belowL, types._SLIME) && pixMatch(belowLN, types._SLIME))))\n\t\t\t\t\t{\n\t\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t\t\t}\n\t\t\t\t\telse if(((!levelR[3] && !levelRN[3]) || (pixMatch(levelR, types._SLIME) && pixMatch(levelRN, types._SLIME)) ) && ((!belowR[3] && !belowRN[3]) || (pixMatch(belowR, types._SLIME) && pixMatch(belowRN, types._SLIME))))\n\t\t\t\t\t{\n\t\t\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(!levelL[3] && !levelR[3] && !levelLN[3] && !levelRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.5)?-1:1), y);\n\t\t\t}\n\t\t\telse if(chance(0.04) && !levelL[3] && !levelLN[3] && !levelLL[3] && !levelLLN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(chance(0.04) && !levelR[3] && !levelRN[3] && !levelRR[3] && !levelRRN[3])\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + (chance(0.04)?1:2), y);\n\t\t\t}\n\t\t\telse if(chance(0.04) && (!levelL[3] && !levelLN[3]) || (pixMatch(levelL, types._SLIME) && pixMatch(levelLN, types._SLIME)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x - 1, y);\n\t\t\t}\n\t\t\telse if(chance(0.04) && (!levelR[3] && !levelRN[3]) || (pixMatch(levelR, types._SLIME) && pixMatch(levelRN, types._SLIME)))\n\t\t\t{\n\t\t\t\tmove(bytes, out, moved, activeMask,  w, x, y, x + 1, y);\n\t\t\t}\n\t\t}\n\t}\n\n\tbytes.set(out);\n\n\tfor(const i in _totals)\n\t{\n\t\t_totals[i] = 0;\n\t}\n\t\n\tfor(const i in totals)\n\t{\n\t\t_totals[i] = 0;\n\t}\n\n\tfor(let i = 0; i < out.length; i += 4)\n\t{\n\t\tif(!out[i + 3]) continue;\n\n\t\t_totals.particles++;\n\n\t\tif(pixMatch(bytes, types._STEAM, i))\n\t\t{\n\t\t\t_totals.steam = 1 + (_totals.steam ?? 0)\n\t\t\t_totals.water = 1 + (_totals.water ?? 0)\n\t\t}\n\t\tif(pixMatch(bytes, types._WATER, i))\n\t\t{\n\t\t\t_totals.freshWater = 1 + (_totals.freshWater ?? 0)\n\t\t\t_totals.water = 1 + (_totals.water ?? 0)\n\t\t}\n\t\tif(pixMatch(bytes, types._SAND, i))\n\t\t{\n\t\t\t_totals.sand = 1 + (_totals.sand ?? 0)\n\t\t}\n\t\tif(pixMatch(bytes, types._LAVA, i))\n\t\t{\n\t\t\t_totals.lava = 1 + (_totals.lava ?? 0)\n\t\t}\n\t\tif(pixMatch(bytes, types._OIL, i))\n\t\t{\n\t\t\t_totals.oil = 1 + (_totals.oil ?? 0)\n\t\t}\n\t\tif(pixMatch(bytes, types._SLIME, i))\n\t\t{\n\t\t\t_totals.slime = 1 + (_totals.slime ?? 0)\n\t\t}\n\t\tif(pixMatch(bytes, types._FIRE, i))\n\t\t{\n\t\t\t_totals.fire = 1 + (_totals.fire ?? 0)\n\t\t}\n\t\tif(pixMatch(bytes, types._SMOKE, i))\n\t\t{\n\t\t\t_totals.smoke = 1 + (_totals.smoke ?? 0)\n\t\t}\n\t}\n\t\n\tObject.assign(totals, _totals);\n}\n\nlet buttonDown = false;\n\nconst addParticle = event => {\n\tconst rect = event.target.getBoundingClientRect();\n\tconst xs = event.clientX - rect.left;\n\tconst ys = event.clientY - rect.top;\n\tconst ws = rect.width;\n\tconst hs = rect.height;\n\n\tconst x = Math.floor(width  * xs / ws);\t\n\tconst y = Math.floor(height * ys / hs);\n\n\tpixSet(activeDataA.data, imageData.data,  4 * parseInt(x + y * width), selectedType);\n};\n\ncanvas.addEventListener('mouseup', event => buttonDown = false);\n\ncanvas.addEventListener('mousedown', event => {\n\taddParticle(event);\n\tbuttonDown = true;\n});\n\ncanvas.addEventListener('mousemove', event => buttonDown && addParticle(event));\n\ndocument.addEventListener('DOMContentLoaded', event => {\n\tdocument.body.appendChild(canvas);\n\tdocument.body.appendChild(active);\n\tpalletView.render(document.body);\n\t// totalView.render(document.body);\n\n\tlet frame = 0;\n\tconst last = 0;\n\n\tconst renderLoop = time => {\n\t\tif(time - frame < 16/1000)\n\t\t{\n\t\t\trequestAnimationFrame(renderLoop);\n\t\t}\n\n\t\tconsole.time('frame');\n\t\tupdate(imageData.data, width, frame++);\n\t\tcontext.putImageData(imageData, 0, 0);\n\t\tactiveContext.putImageData(frame % 2 ? activeDataB : activeDataA, 0, 0);\n\t\trequestAnimationFrame(renderLoop);\n\t\t// setTimeout(renderLoop, 50);\n\t\t// setTimeout(renderLoop, 0);\n\t\tconsole.timeEnd('frame');\n\t\t// for(let i = 0; i < activeData.data.length; i += 4)\n\t\t// {\n\t\t// \tactiveData.data[i+0] = 0;\n\t\t// \tactiveData.data[i+1] = 0;\n\t\t// \tactiveData.data[i+2] = 0;\n\t\t// \tactiveData.data[i+3] = 0;\n\t\t// }\n\t};\n\n\trenderLoop();\n});\n"]}